<!DOCTYPE html>
<html>

<head>
  <title>InternetNomad</title>
  <script type="module">
    import { PasswordManager } from "./../dist/Pages/PasswordManager.js";
    new PasswordManager();
  </script>
  <link href="../css/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../css/bootstrap/icons/bootstrap-icons.css" rel="stylesheet" type="text/css">
  <link href="../css/bootstrap/extra/sidebars/sidebars.css" rel="stylesheet" type="text/css">
  <link href="../css/loader.css" rel="stylesheet" type="text/css">
  <link href="../css/my.css" rel="stylesheet" type="text/css">
</head>

<body>
  <div id="notification_container"></div>
  <div class="loader-container" id="loader">
    <div class="loader"></div>
  </div>

  <main>
    <div class="d-flex flex-column flex-shrink-0 bg-light border-dark border-right" style="width: 4.5rem;">
      <div class="d-block p-3 link-dark text-decoration-none" title="InternetNomad">
        <img class="bi img-fluid mx-auto d-block" width="24" height="24" role="img" aria-label="InternetNomad"
          src="internetnomadicon.png">
      </div>
      <ul class="nav nav-pills nav-flush flex-column mb-auto text-center">
        <li class="nav-item">
          <a href="#" class="nav-link py-3 border-bottom" title="Login" id="login_pane_button">
            <svg class="bi" width="24" height="24" role="img" aria-label="Login">
              <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#door-open-fill" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link py-3 border-bottom" title="Home" id="home_pane_button">
            <svg class="bi" width="24" height="24" role="img" aria-label="Home">
              <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#house" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link py-3 border-bottom" title="Word Recovery" id="word_recovery_button">
            <svg class="bi" width="24" height="24" role="img" aria-label="Word Recovery">
              <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#file" />
            </svg>
          </a>
        </li>

        <li class="nav-item">
          <a href="#" class="nav-link py-3 border-bottom" title="Shared Recovery" id="shared_recovery_button">
            <svg class="bi" width="24" height="24" role="img" aria-label="Shared Recovery">
              <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#collection" />
            </svg>
          </a>
        </li>

        <li class="nav-item">
          <a href="#" class="nav-link py-3 border-bottom" title="Identity" id="identity_pane_button">
            <svg class="bi" width="24" height="24" role="img" aria-label="Identity">
              <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#person-badge" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link py-3 border-bottom" title="Settings" id="settings_pane_button">
            <svg class="bi" width="24" height="24" role="img" aria-label="Settings">
              <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#gear" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link py-3 border-bottom" title="Recovery" id="recovery_pane_button">
            <svg class="bi" width="24" height="24" role="img" aria-label="Recovery">
              <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#box-arrow-in-up" />
            </svg>
          </a>
        </li>
      </ul>
      <div id="logout">
        <a href="#" class="nav-link py-3 border-bottom border-top text-danger" title="Logout">
          <svg class="bi img-fluid mx-auto d-block" width="24" height="24" role="img" aria-label="Logout">
            <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#door-closed" />
          </svg>
        </a>
      </div>
    </div>

    <div class="p-3 w-100 overflow-auto my-initial-pane" id="login_pane">
      <div class="container">

          <div class="login" id="login">
            <img src="internetnomadsmall.png" alt="Internet Nomad Icon" class="img-fluid mx-auto d-block">
            <h1 class="mt-3 mb-1">Login</h1>
      
            <div class="form-check mb-3 pe-3">
              <div class="form-group my-3">
                <input type="password" class="form-control" id="login_password" placeholder="Password">
              </div>
              <button class="btn btn-primary" id="login_submit">Submit</button>
            </div>
      
            <h3>Backup Login</h3>
            <p>Can't log in? You can choose a backup method here</p>
            <div class="form-check mb-3">
              <button class="btn btn-secondary" id="login_shared_recovery">Shared recovery</button>
              <button class="btn btn-secondary" id="login_word_recovery">Word recovery</button>
            </div>
      
            <h3>Start anew?</h3>
            <p>If you can't recovery your data, you can reset it here.</p>
      
            <div class="form-check mb-3 pe-3">
              <button class="btn btn-danger" id="login_restart">Delete data</button>
            </div>
          </div>

      </div>
    </div>

    <div class="p-3 w-100 overflow-auto my-initial-pane" id="word_recovery_pane">
      <div class="container">
        <h1>Word Recovery</h1>
        <div class="form-check">
          <div id="recovery_fields" class="d-flex flex-row flex-wrap mb-3" style="justify-content: baseline;"></div>
          <button id="submit" type="button" class="btn btn-primary mb-3">Submit</button>
        </div>
      </div>
    </div>

    <div class="p-3 w-100 overflow-auto my-initial-pane" id="shared_recovery_pane">
      <div class="container">
        <h1>Shared Recovery</h1>
        <div class="form-check mb-3">
          <label class="col-form-label" for="recovery_pieces">Number of pieces (n): </label>
          <input class="form-control" type="number" name="number" min="2" value="2" id="recovery_pieces">
          <p class="text-danger">Changing this later will reset your pages</p>
        </div>
        <div class="form-check">
          <div id="pages" class="d-flex flex-row flex-wrap mb-3" style="justify-content: baseline;"></div>
          <button id="submit" type="button" class="btn btn-primary mb-3">Submit</button>
        </div>
      </div>
    </div>

    <div class="w-100 overflow-auto my-initial-pane" id="home_pane">
      <main>
        <div class="d-flex flex-column align-items-stretch flex-shrink-0 bg-white" style="width: 380px;">
          <div class="d-flex align-items-center flex-shrink-0 p-2 link-dark text-decoration-none border-bottom">
            <svg class="bi me-2" width="30" height="24">
              <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#person-fill" />
            </svg>
            <span class="fs-5 fw-semibold">Accounts</span>
            <form class="subnav-search d-flex flex-nowrap ms-3">
              <label class="visually-hidden" for="search_home">Search</label>
              <input class="form-control search mb-0" id="search_home" placeholder="Start typing to filter..."
                autocomplete="off">
            </form>
            <a href="#" class="text-primary mx-1" id="add_account">
              <svg class="bi img-fluid m-0 d-block" width="32" height="32" role="img" aria-label="Add Account">
                <use xlink:href="../css/bootstrap/icons/bootstrap-icons.svg#plus" />
              </svg>
            </a>
          </div>
          <div class="list-group list-group-flush border-bottom scrollarea h-100" id="account_space">
            <!-- Accounts go here -->
          </div>
        </div>

        <div class="d-block p-3 w-100 overflow-auto border-start my-initial-pane">
          <h1>Account Details</h1>
          <div class="form-check d-flex flex-row flex-wrap justify-content-center mb-3">
            <label for="account_website" class="d-block my-auto me-3">Website:</label>
            <input type="text" name="account_website" class="d-block my-auto mw-100" id="account_website">
          </div>
          <div class="form-check d-flex flex-row flex-wrap justify-content-center mb-3">
            <label for="account_username" class="d-block my-auto me-3">Username:</label>
            <input type="text" name="account_username" class="d-block my-auto mw-100" id="account_username">
          </div>
          <div class="form-check d-flex flex-row flex-wrap justify-content-center mb-3">
            <label for="account_password" class="d-block my-auto me-3">Password:</label>
            <input type="password" name="account_password" class="d-block my-auto mw-100" id="account_password">
          </div>
          <div class="form-check d-flex flex-row flex-wrap justify-content-center mb-3">
            <label for="account_show_password" class="d-block my-auto me-1">Show password:</label>
            <input type="checkbox" name="account_show_password" class="d-block my-auto mw-100"
              id="account_show_password">
          </div>
          <div class="form-check d-flex flex-row flex-wrap justify-content-center mb-3">
            <button type="button" name="account_delete" class="d-block my-auto btn btn-danger mw-100"
              id="account_delete">Delete account</button>
          </div>
          <!-- Extras here -->
        </div>

      </main>
    </div>

    <div class="p-3 w-100 overflow-auto my-initial-pane" id="identity_pane">
      <div class="container">
        <h1>Identities</h1>
        <h3>Active identity</h3>
        <h4 id="pane_identity_field_name"></h4>
        <p id="pane_identity_field_desc"></p>

        <h3>Change identity</h3>
        <div class="form-check mb-3">
          <label for="identity_select">Choose an identity:</label>
          <select name="identity_select" id="identity_select"></select>
        </div>

        <h3>Edit current identity</h3>
        <div class="form-check mb-3" id="edit_identity_form">
          <label class="col-form-label" for="edit_identity_form_name">Identity Name: </label>
          <input class="form-control" id="edit_identity_form_name">

          <label class="col-form-label" for="edit_identity_form_desc">Identity Description: </label>
          <input class="form-control" id="edit_identity_form_desc"><!-- Make multiline -->
        </div>

        <h3>Add an identity</h3>
        <div class="form-check mb-3" id="add_identity_form">
          <label class="col-form-label" for="add_identity_form_name">Identity Name: </label>
          <input class="form-control" id="add_identity_form_name">

          <label class="col-form-label" for="add_identity_form_desc">Identity Description: </label>
          <input class="form-control" id="add_identity_form_desc"><!-- Make multiline -->
          <button id="add_identity_button" type="button" class="d-block btn btn-primary mb-3 mt-3">Add identity</button>
        </div>

        <button id="remove_identity_button" type="button" class="d-block btn btn-danger mb-3">Remove current
          identity</button>
      </div>
    </div>

    <div class="p-3 w-100 overflow-auto my-initial-pane" id="settings_pane">
      <div class="container">
        <!-- change to accordions https://getbootstrap.com/docs/5.0/components/accordion/ -->
        <h1>Settings</h1>
        <h3>Info</h3>
        <ul>
          <li id="info_slot_open">Slot open: {}</li>
        </ul>

        <!--<h3>Current password</h3>-->
        <!-- Will be needed in the future -->

        <h3>Change Password</h3>
        <div class="form-check mb-3" id="password_form">
          <label class="col-form-label" for="password_change_once">Password: </label>
          <input class="form-control" type="password" name="password" id="password_change_once">

          <label class="col-form-label" for="password_change_twice">Confirm: </label>
          <input class="form-control" type="password" name="password" id="password_change_twice">

          <button id="change_password" type="button" class="btn btn-primary mb-3 mt-3">Change Password</button>
        </div>

        <h3>Add Slot</h3>
        <div class="form-check mb-3" id="password_form">
          <label class="col-form-label" for="password_new_slot_once">New container password: </label>
          <input class="form-control" type="password" name="password" id="password_new_slot_once">

          <label class="col-form-label" for="password_new_slot_twice">Confirm: </label>
          <input class="form-control" type="password" name="password" id="password_new_slot_twice">

          <button id="add_slot" type="button" class="btn btn-primary mb-3  mt-3">Add Slot</button>
        </div>

        <h3>Remove Slot</h3>
        <div id="show_slots" class="d-flex flex-wrap justify-content-center"></div>
      </div>
    </div>

    <div class="p-3 w-100 overflow-auto my-initial-pane" id="recovery_pane">
      <div class="w-100 container">
        <h3>Recovery</h3>
        <p class="lead">
          This is where you make backups of the master key, which is what you primariy use to unlock this container.
          You can make a backup in one of two ways, a "BIP" backup or a "Shared" backup.
        </p>
        <h3>How to write down BIPs?</h3>
        <p>
          The bips must be written down in order. When a word is <span
            class="text-decoration-underline">underlined</span>, you should either provide a
          marking, like a star (*) or an underline. This is to ensure the same data will be able to be returned back
          into the program if needed. It's
          very important to remember that these BIPs don't have any data validation, meaning that entering the wrong
          data would result in program fail.
          Underlining carries the final bit in the 16bit/word scheme, so it's important to include.
        </p>
        <h4>BIP</h4>
        <p>
          A BIP backup is simply put the private key represented by a bunch of words. It lets you make an unencrypted
          paper backup of your master
          key should you forget it. This security is only as good as the place you hide/keep it. If you keep this
          information on your sticky on
          your pc, you might as well just write your password too; it'll save your adversery a click. <span
            class="text-danger">This type of backup is not designed to be distributed.</span>
        </p>
        <h4 class="text-danger">Important</h4>
        <p class="fw-bold">
          Do not use this as a shared backup. This doesn't have the same level of protection as a shared backup.
        </p>
        <h4>Shared backup</h4>
        <p>
          A Shared backup is a series of BIP backups. These are different from a standalone BIP backup. These backups
          implement a modified Shamir's Scheme.
          This scheme allows an entity (like you) to split a secret into (n) pieces, requiering (k) number of pieces to
          discover the original secret. This
          means that a person holding (k-1) pieces needed to discover a secret cannot know what the original secret is -
          they are no closer to knowing the
          secret than a person holding only one piece. A usecase for this might be if you don't trust a single person
          with all the data in this password manager.
          The data thresholds (k) and pieces (n) can be chosen by you. For example, if you have 10 friends and you trust
          that if any 6 friends got together,
          they will be able to come to a consensus and decide what is the best for your data without you, you can set
          the (n) parameter to 10 and the (k)
          parameter to 6. Then you would distribute the BIP to every friend. They then would be able to access the data
          inside the password manager.
        </p>

        <h3 class="mt-3">Your BIP backup</h3>
        <div id="bip" class="d-flex flex-row flex-wrap mb-3"></div>
        <button id="reveal_bip" type="button" class="btn btn-primary mb-3">Reveal BIP</button>

        <h3>Your Shared Backup</h3>

        <div class="form-check mb-3">
          <label class="col-form-label" for="recovery_pieces">Number of pieces (n): </label>
          <input class="form-control" type="number" name="number" min="2" value="2" id="recovery_pieces">

          <label class="col-form-label" for="recovery_threshold">Opening threshold (k): </label>
          <input class="form-control" type="number" name="number" min="2" value="2" id="recovery_threshold">

          <button id="generate_shared_recovery" type="button" class="btn btn-primary mt-3 mb-3">Generate Shared
            Recovery</button>
        </div>

        <div class="back d-none" id="generate_shared_recovery_screen">
          <h1 id="generate_shared_recovery_title"></h1>
          <div id="generate_shared_recovery_bip" class="d-flex flex-row flex-wrap mb-3"></div>
          <button id="generate_shared_recovery_previous" type="button"
            class="btn btn-primary mb-3 d-inline">Previous</button>
          <button id="generate_shared_recovery_next" type="button" class="btn btn-primary mb-3 d-inline">Next</button>
        </div>

      </div>
    </div>

  </main>

  <script src="../css/bootstrap/js/bootstrap.js"></script>
</body>

</html>